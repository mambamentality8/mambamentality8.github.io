

# WebStorm安装

下载地址 
https://www.jetbrains.com/webstorm/download/previous.html 

选择  2018.2.3版本

![1568795246384](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568795246384.png)

一路下一步



破解码

```
K6IXATEF43-eyJsaWNlbnNlSWQiOiJLNklYQVRFRjQzIiwibGljZW5zZWVOYW1lIjoi5o6I5p2D5Luj55CG5ZWGOiBodHRwOi8vaWRlYS5oay5jbiIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNi0wNSIsInBhaWRVcFRvIjoiMjAyMC0wNi0wNCJ9LHsiY29kZSI6IkFDIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNi0wNSIsInBhaWRVcFRvIjoiMjAyMC0wNi0wNCJ9LHsiY29kZSI6IkRQTiIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDYtMDUiLCJwYWlkVXBUbyI6IjIwMjAtMDYtMDQifSx7ImNvZGUiOiJQUyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDYtMDUiLCJwYWlkVXBUbyI6IjIwMjAtMDYtMDQifSx7ImNvZGUiOiJHTyIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDYtMDUiLCJwYWlkVXBUbyI6IjIwMjAtMDYtMDQifSx7ImNvZGUiOiJETSIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDYtMDUiLCJwYWlkVXBUbyI6IjIwMjAtMDYtMDQifSx7ImNvZGUiOiJDTCIsImZhbGxiYWNrRGF0ZSI6IjIwMTktMDYtMDUiLCJwYWlkVXBUbyI6IjIwMjAtMDYtMDQifSx7ImNvZGUiOiJSUzAiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiUkMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiUkQiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiUEMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiUk0iLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiV1MiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiREIiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiREMiLCJmYWxsYmFja0RhdGUiOiIyMDE5LTA2LTA1IiwicGFpZFVwVG8iOiIyMDIwLTA2LTA0In0seyJjb2RlIjoiUlNVIiwiZmFsbGJhY2tEYXRlIjoiMjAxOS0wNi0wNSIsInBhaWRVcFRvIjoiMjAyMC0wNi0wNCJ9XSwiaGFzaCI6IjEzMjkyMzI4LzAiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-KUaQi549fH96M/qU7jTvuMeq2GuedA+WppV3irI0JHlfDuhJlidK2m3yoRxitGNmimPFVUA8Dk38OzXnP29I39QDXH5VAF8VjOP0XrqdfrpaZUKpdhRaYz8r1NAwID75U4LqYCvFbazka1dCMJBFqJ2wum1+CSQhJ1O7CSchAJAbjcCRQjbU2sXOofAA2sPLi7nlJw2wrjOHzH9cOczUn11n24PE9BQ/oYGITHkzsu94i4Q90Z1jQysMtXLgM/HoLSHY2T9rKULLoh+tdMwBp9+m0VLF/R5gdkVDV/dlorrA9OEZIsSOaG+oWSen/AulKH6OXllZJoR+b/T6YYfGWg==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxcQkq+zdxlR2mmRYBPzGbUNdMN6OaXiXzxIWtMEkrJMO/5oUfQJbLLuMSMK0QHFmaI37WShyxZcfRCidwXjot4zmNBKnlyHodDij/78TmVqFl8nOeD5+07B8VEaIu7c3E1N+e1doC6wht4I4+IEmtsPAdoaj5WCQVQbrI8KeT8M9VcBIWX7fD0fhexfg3ZRt0xqwMcXGNp3DdJHiO0rCdU+Itv7EmtnSVq9jBG1usMSFvMowR25mju2JcPFp1+I4ZI+FqgR8gyG8oiNDyNEoAbsR3lOpI7grUYSvkB/xVy/VoklPCK2h0f0GJxFjnye8NT1PAywoyl7RmiAVRE/EKwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQAF8uc+YJOHHwOFcPzmbjcxNDuGoOUIP+2h1R75Lecswb7ru2LWWSUMtXVKQzChLNPn/72W0k+oI056tgiwuG7M49LXp4zQVlQnFmWU1wwGvVhq5R63Rpjx1zjGUhcXgayu7+9zMUW596Lbomsg8qVve6euqsrFicYkIIuUu4zYPndJwfe0YkS5nY72SHnNdbPhEnN8wcB2Kz+OIG0lih3yz5EqFhld03bGp222ZQCIghCTVL6QBNadGsiN/lWLl4JdR3lJkZzlpFdiHijoVRdWeSWqM4y0t23c92HXKrgppoSV18XMxrWVdoSM3nuMHwxGhFyde05OdDtLpCv+jlWf5REAHHA201pAU6bJSZINyHDUTB+Beo28rRXSwSh3OUIvYwKNVeoBY+KwOJ7WnuTCUq1meE6GkKc4D/cXmgpOyW/1SmBz3XjVIi/zprZ0zf3qH5mkphtg6ksjKgKjmx1cXfZAAX6wcDBNaCL+Ortep1Dh8xDUbqbBVNBL4jbiL3i3xsfNiyJgaZ5sX7i8tmStEpLbPwvHcByuf59qJhV/bZOl8KqJBETCDJcY6O2aqhTUy+9x93ThKs1GKrRPePrWPluud7ttlgtRveit/pcBrnQcXOl1rHq7ByB8CFAxNotRUYL9IF5n3wJOgkPojMy6jetQA5Ogc8Sm7RG6vg1yow==
```

​	![1568795323981](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568795323981.png)

# nginx安装

下载nginx：http://nginx.org/en/download.html 
本教程下载nginx-1.14.0.zip(http://nginx.org/download/nginx-1.14.0.zip) 解压nginx-1.14.0.zip到自己的计算机，双击nginx.exe即可运行。
访问 ：http://localhost

![1568797250228](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568797250228.png)

nginx启动和停止

```
启动

直接点击Nginx目录下的nginx.exe    或者    Nginx目录下cmd运行start nginx

关闭

Nginx目录下 nginx -s stop    或者    Nginx目录下 nginx -s quit

stop表示立即停止nginx,不保存相关信息

quit表示正常退出nginx,并保存相关信息

重启(因为改变了配置,需要重启)

nginx -s reload
```



# nginx配置

配置虚拟主机

```
server{
	listen       80;
	server_name  www.xuecheng.com;
	ssi on;
	ssi_silent_errors on;
	location / {
		alias   X:/workspace/java/xczx/xczx01/xc-ui-pc-static-portal/;
		index  index.html;
	}
	
   }
```

配置完以后要reload   nginx



配置hosts文件
以管理员身份修改C:\Windows\System32\drivers\etc\hosts文件

```
127.0.0.1 www.xuecheng.com
```

进入浏览器，输入http://www.xuecheng.com  

![1568799244482](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568799244482.png)



# SSI服务端包含技术

- 页面内容多如何管理？ 
  将页面拆分成一个一个的小页面，通过cms去管理这些小页面，当要更改部分页面内容时只需要更改具体某个小页 面即可。
- 页面拆出来怎么样通过web服务浏览呢？ 
  使用web服务(例如nginx)的SSI技术，将多个子页面合并渲染输出。 
- SSI是什么？

![1568799726999](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568799726999.png)

​	ssi包含类似于jsp页面中的incluce指令，ssi是在web服务端将include指定 的页面包含在网页中，渲染html网页响 应给客户端 。nginx、apache等多数web容器都支持SSI指令。
ssi指令如下：

```
<!‐‐#include virtual="/../....html"‐‐>
```



- 将首页拆分成

  ```
  index.html：首页主体内容 
  include/header.html：头部区域 
  include/index_banner.html：轮播图 
  include/index_category.html：左侧列表导航 include/footer.html：页尾
  ```

- 在nginx虚拟主机中开通SSI

  ```
  server{
      listen       80;     server_name  www.xuecheng.com;     
      ssi on;
      ssi_silent_errors on;     
      ......
  ```

  ssi的配置参数如下： 

  ssi on： 开启ssi支持 ssi_silent_errors on：默认为oﬀ，设置为on则在处理SSI文件出错时不 输出错误信息 ssi_types：默认为 ssi_types text/html，如果需要支持shtml（服务器执行脚本，类似于jsp）则需 要设置为ssi_types text/shtml

- 测试 

  导入门户工程
  使用WebStorm打开门户工程目录，目录的结构如下，后期会根据开发的推进进行扩充。

  ![1568797279338](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568797279338.png)

  去掉某个#include查看页面效果。

# CMS页面管理需求

### 这些页面的管理流程是什么?

1）创建站点： 
一个网站有很多子站点，比如：学成在线有主门户、学习中心、问答系统等子站点。具体的哪个页面是归属于具体 的站点，所以要管理页面，先要管理页面所属的站点。
2）创建模板： 
页面如何创建呢？比如电商网站的商品详情页面，每个页面的内容布局、板式是相同的，不同的只是内容，这个页 面的布局、板式就是页面模板，模板+数据就组成一个完整的页面，最终要创建一个页面文件需要先定义此页面的 模板，最终拿到页面的数据再结合模板就拼装成一个完整的页面。

3）创建页面：
创建页面是指填写页面的基本信息，如：页面的名称、页面的url地址等。
4）页面预览： 
页面预览是页面发布前的一项工作，页面预览使用静态化技术根据页面模板和数据生成页面内容，并通过浏览器预 览页面。页面发布前进行页面预览的目是为了保证页面发布后的正确性。
5）页面发布：
  使用计算机技术将页面发送到页面所在站点的服务器，页面发布成功就可以通过浏览器来访问了。 
2、本项目要实现什么样的功能？
1）页面管理
管理员在后台添加、修改、删除页面信息
2）页面预览
管理员通过页面预览功能预览页面发布后的效果。
3）页面发布
管理员通过页面发布功能将页面发布到远程门户服务器。 
页面发布成功，用户即可在浏览器浏览到最新发布的页面，整个页面添加、发布的过程由于软件自动执行，无需人 工登录服务器操作。

# CMS服务端工程搭建

### 开发工具配置:

- 创建工程代码目录 XcEduCode

- 配置maven环境 ,maven仓库的目录位置不要去使用中文

- 设置编码

  ![1568820442695](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568820442695.png)

- 配置JDK1.8 

  ![1568820813638](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568820813638.png)

- 自动优化导入包

  ![1568820841956](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568820841956.png)

- 自定义自己的代码模板

  ![1568820864830](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568820864830.png)

- 提示忽略大小写

  ![1568820883255](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568820883255.png)

- 配置虚拟机内存,修改idea64.exe.vmoptions

  ```
  一个例子，电脑内存8G，设置如下：
  -Xms1024m -Xmx4096m -XX:MaxPermSize=1024m -XX:ReservedCodeCacheSize=1024m
  ```

### 导入基础工程

CMS及其它服务端工程基于maven进行构建，首先需要创建如下基础工程： 

- parent工程：父工程，提供依赖管理。 
- common工程：通用工程，提供各层封装
- model工程：模型工程，提供统一的模型类管理 
- utils工程：工具类工程，提供本项目所使用的工具类 
-  Api工程：接口工程，统一管理本项目的服务接口。



依次导入utils、model、common、api工程，方法同parent工和的导入。

![1568881269669](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568881269669.png)

工程结果如下：

​	![1568821004271](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568821004271.png)

# 安装MongoDB

### 下载mongodb

下载3.4版本：http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2008plus-ssl-v3.4-
latest-signed.msi

### 安装mongodb

![1568881417580](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568881417580.png)

​					路径自己选择一下

### 配置mongodb

创建几个文件夹具体如下：数据库路径（data目录）、日志路径（logs目录）和配置文件（mongo.conf文件）

![1568881493498](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568881493498.png)

创建配置文件mongo.conf，文件内容如下：

```
#数据库路径
dbpath=X:\development\java\mongoDB\data
#日志输出文件路径
logpath=X:\development\java\mongoDB\logs\mongo.log
#错误日志采用追加模式
logappend=true
#启用日志文件，默认启用
journal=true
#这个选项可以过滤掉一些无用的日志信息，若需要调试使用请设置为false
quiet=true
#端口号 默认为27017
port=27017
```

### 安装 MongoDB服务 

在mongo的bin目录下执行此命令!!! :

安装的时候cmd一定要启用管理员的模式!!!

```
mongod.exe --config "X:\development\java\mongoDB\mongo.conf" --install
```

### 启动MongoDB服务

```
net start MongoDB
```

### 关闭MongoDB服务

```
net stop MongoDB
```

### 移除MongoDB服务

移除的时候cmd一定要启用管理员的模式!!!

```
"X:\development\java\mongoDB\bin\mongod.exe" --remove
```

### 测试

启动mongodb服务， 
命令执行后，浏览器中输入http://127.0.0.1:27017看到如下界面即说明启动成功

![1568882724838](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568882724838.png)

# MongoDB客户端

### 命令行

通过bin目录下的mongo.exe连接mongodb

![1568882777070](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568882777070.png)

### studio3t

studio3t是mongodb优秀的客户端工具。官方地址在https://studio3t.com/

- 下载studio3t   https://studio3t.com/download/

- 安装并启动

- 创建一个新连接：

  ![1568883041097](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883041097.png)

  ![1568883276097](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883276097.png)

  ​	![1568883291175](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883291175.png)

- 连接成功

![1568883320166](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883320166.png)

- 修改字体： 
  默认Studio3t的字体太小，需要修改字体： 点击菜单：Edit--->Preferences

  ![1568883411980](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883411980.png)

# mongodb入门

### 基础概念

在mongodb中是通过数据库、集合、文档的方式来管理数据，下边是mongodb与关系数据库的一些概念对比：

| SQL术语/概念 | MongoDB术语/概念 | 解释/说明                                 |
| ------------ | ---------------- | ----------------------------------------- |
| database     | database         | 数据库                                    |
| table        | collection       | 数据库表/集合                             |
| row          | document         | 数据记录行/文档                           |
| column       | ﬁeld             | 数据字段/域                               |
| index        | index            | 索引                                      |
| table joins  |                  | 表连接（MongoDB不支持）                   |
| primary key  | primary key      | 主键,MongoDB自动在每个集合中添加_id的主键 |

![1568883625110](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1568883625110.png)

1、一个mongodb实例可以创建多个数据库 
2、一个数据库可以创建多个集合 
3、一个集合可以包括多个文档

### 连接mongodb

mongodb的使用方式是客户服务器模式，即使用一个客户端连接mongodb数据库（服务端）。 
1、 命令格式

```
mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][? options]]
```

