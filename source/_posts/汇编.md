Windows逆向环境搭建

```

```

### 寄存器

- ollydbg的简介

![1562135783188](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1562135783188.png)



- 寄存器

  - EAX
  
  - ECX
  
  - EBX

  - ESP 
  
    - 它永远指向堆栈窗口的最顶端
  
  - EBP

  - ESI

  - EDI

  - EIP
  
    - 指向当前即将要执行的指令,在CPU窗口有对应的地址值,CPU下次就要执行这个地址的指令
  - EIP是没有修改数值的菜单的,只能在CPU窗口的某一行右键此处为新EIP才可以改变EIP的值
    
    
  
- 32位寄存器

  - EAX :  12345678 (十六进制的数)
  -   AX :           5678
  -   AH :          56
  -   AL  :              78

  如果碰到cmp al,bl

  ​	比较的就是后两位78

  这种高八位  第八位只能用在EAX  ECX  EDX  EBX身上





- EIP的下方是标志位寄存器

  - C
    - 进位标志
    - 无符号运算结果 最大值累加1
    - C标志变为1

  - P
    - 奇偶标志
    - 在CPU窗口执行一个指令,如果把结果转化为二进制以后,数字1的个数为偶数的话P就为1
    - 同样将EAX的值改为0x00000000  add eax,0x1
    - 那么EAX的值为00000001
    - 同时P的值为0
    - 当EAX的值达到0x00000011时
    - P的值也达到了1
    - 如果想多次添加1只需要在CPU的窗口使用设置新的EIP,然后在使用F8

  - A
    - 辅助进位标志

  - Z
    - 0标志位
    - 将EAX的值设置为0xFFFFFFFF  (十进制的-1)
    - 在使用add  eax,0x1的话
    - Z的值就会变为1

  - S
    - 是一个符号标志
    - 当结果为负数  S为1

  - T

  - D

  - O        
    - 溢出标志位:当操作修改了符号位它就变为1
    - 例如: EAX为0x7fffffff    add eax,0x1
    - 十六进制有符号位0x00000000~0x7fffffff是正数
    - ​                               0x80000000~0xffffffff是负数





### 汇编指令

- nop
  - nop就是什么也不做,占别人的位置,让别人起不了作用

![1562156960749](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1562156960749.png)

从这里可以看出nop的十六进制机器码就是90  这里千万不能将空余的数据填充为00



- push

  - 压栈操作
  - push  0x1
  - push  eax (寄存器)
  - push  [40100]  (40100位地址值)将对应地址值里面的数据压入栈中

  ![1562166734738](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1562166734738.png)

- pop

  - 弹栈操作
  - pop eax 将栈顶的数据弹给寄存器eax
  - pop ecx 将栈顶的数据弹给寄存器ecx
  - pop edx 将栈顶的数据弹给寄存器edx
  - pop ebx 将栈顶的数据弹给寄存器ebx





- pushad(32位)

  - 把通用寄存器里面的数据依次压入栈中

  - 压栈从上向下

  - 备份

    

- popad(32位)

  - 把通用寄存器里面的数据依次从栈中弹出来
  - 弹栈从下到上
  - 还原



- pusha(16位)
  - 把通用寄存器里面的数据依次压入栈中
  - 压栈从上向下
  - 备份



- popa(16位)
  - 把通用寄存器里面的数据依次从栈中弹出来
  - 弹栈从下到上
  - 还原