### 基础分析

![1566567989890](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566567989890.png)

![1566568242777](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566568242777.png)

- loadIconA

  调用了一个加载图标的函数  

  loadIconA外部函数不是本模块中的函数    &取地址符  USER32  windows的函数库

  的loadIconA函数



- dll

  windows的动态链接库,提供给exe程序(可执行文件)使用的函数库

  exe  bat  com 都是可执行文件

  如果说不调用windws的dll的话把库函数都集成在本身的文件内部,那么这个可执行程序所占用的硬盘空间就会非常大.



- 系统领空

  ![1566620146143](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566620146143.png)

  从这里通过call  跟随进去  然后一直追溯到user32

  ![1566623713455](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566623713455.png)

  如何回到可执行文件的模块了,摁小键盘的减号键

  不要随便改系统领空



- messageboxA

  - ![1566625339665](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566625339665.png)
  - 调用了弹框函数,跟随进去找到段首

  ![1566624857499](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566624857499.png)

  - 或者使用command

  ![1566625144688](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566625144688.png)

  - ctrl+g  goto 快捷键   注意大小写命令一定要对

  ![1566625398550](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566625398550.png)



- ctrl+n

  - 必须在当前程序下使用快捷键ctrl+n
  - 在系统领空下使用ctrl+n的话就会跳到系统领空对应的dll中  (不要这样做)
  - 查看本程序所调用的api

  ![1566629646149](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566629646149.png)

  直接在这个窗口中去搜索你需要的函数名   标题上的名称也会随之改变

  ![1566629716621](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566629716621.png)

  找到你想要的函数之后在这里右键,选中反汇编窗口中跟随输入函数

  然后就可以跳到MessageBoxA函数中

  

- 设置断点

  - 然后在MessageBoxA函数的段首下上一个断点 (双击或者F2)
  - 或者在command中使用命令bp MessageBoxA

  ![1566630287328](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566630287328.png)

  - 点击按钮B就可以进到断点窗口

  ![1566630397217](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566630397217.png)



- 调试程序

  - 先在MessageBoxA函数的段首打上断点
  - 然后摁F9将程序运行起来    将程序运行起来断到断点处

  ![1566631584431](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566631584431.png)

  - 断到断点处  堆栈框会有相应的信息

  ![1566632020971](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566632020971.png)

  执行完以后跳到004013C1地址处

  ![1566659216451](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566659216451.png)

  顺着这个框往上找,找到条件跳转的地方

  ![1566633913596](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566633913596.png)
  
  在跳转的地方打上断点,这个跳转是第一次跳转
  
  ![1566660476013](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566660476013.png)
  
  ![1566660598224](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566660598224.png)
  
  ![1566660754164](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566660754164.png)
  
  ![1566660861309](C:\Users\85896\AppData\Roaming\Typora\typora-user-images\1566660861309.png)
  
  找到段首的位置,点击转到call来自的地址,第二次调用的地方是
  
  77D507EA是messageboxa函数的首地址
  
  0040138B是第一次跳转要弹框的地址
  
  00401245是第二次跳转要弹框的地址